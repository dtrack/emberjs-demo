<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]--> <!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]--> <!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]--> <!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>EmberJS - Demo</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="css/style.css?v=2">

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
<h1>EmberJs - Demo</h1>
<script type="text/x-handlebars" />
<div id="controls">
    {{#view Em.Button target="Demo.demoController" action="addOne"}}
        Add One
    {{/view}}
    {{#view Em.Button target="Demo.demoController" action="addMany"}}
        Add Many
    {{/view}}
    {{#view Em.Button target="Demo.demoController" action="removeLast"}}
        Remove Last
    {{/view}}
    {{#view Em.Button target="Demo.demoController" action="clearAll"}}
        Clear All
    {{/view}}
    {{#view Em.Button target="Demo.demoController" action="triggerError"}}
        Fake Error
    {{/view}}
    <img src="spinner.gif" style="display: none;">
</div>
{{#view Demo.summaryView id="summary-view" content=this }}
    <h2>Site Summary</h2>
        <table>
            <tr>
                <th>Stat</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Count</td>
                <td id="site-count" 
                {{bindAttr class="Demo.demoController.isError:error"}}>
                    {{ count }}
                </td>
            </tr>
            <tr>
                <td>Longest Name</td>
                <td id="longest-name">
                    {{ longestName }}
                </td>
            </tr>
            <tr>
                <td>Longest Url</td>
                <td id="longest-url">
                    {{ longestUrl }}
                </td>
            </tr>
        </table>
{{/view}}
<div id="site-list">
    <h2>Site List</h2>
      <ul>
        {{#each Demo.demoController}}
            {{#view Demo.siteListItemView id="site-list-item" contentBinding="this"
              valueBinding="this.id" tagName="li"}}
            <a href="#site-details-view" 
                {{action "changeCurrentSite" idSiteBinding="content.id"}}
                rel="{{content.id}}">{{content.name}}</a>
            {{/view}}
        {{/each}}
      </ul>
</div>

{{#view Demo.siteDetailsView id="site-details-view" content=this
   classBinding="siteUnSet:current-site-unset"
}}
<h2>Site Details</h2>
<table>
    <tr>
        <th>Field</th>
        <th>Value</th>
    </tr>
    <tr>
        <td>Name</td>
        <td id="site-name">{{name}}</td>
    </tr>
    <tr>
        <td>URL</td>
        <td id="site-url">{{url}}</td>
    </tr>
    <tr>
        <td>Visits</td>
        <td id="site-visits">{{visits}}</td>
    </tr>
</table>
{{/view}}

{{#view Demo.errorView id="error-view" classBinding="isError:error"}}
    <div>timeout in pretending to talk to server</div>
    {{#view Em.Button target="Demo.demoController" action="clearAll"}}
        Ok
    {{/view}}
{{/view}}
</script>


  <!-- The missing protocol means that it will match the current protocol, either http or https. If running locally, we use the local jQuery. -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="js/libs/ember-0.9.7.1.min.js"></script>
  <script src="js/libs/ember-res.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
